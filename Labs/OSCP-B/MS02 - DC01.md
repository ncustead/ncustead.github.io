![[Pasted image 20230828124203.png]]
- I used sql_svc's cred to authenticate to the MSSQL Server with the following syntax. I ran an nmap scan to discover two SQL ports (1433, 49700)
- Referring back to the agent list, this is the syntax I used to transfer. You have to use to the internal IP of the MS01 to pivot through the listeners
- ![[Pasted image 20230828124745.png]]
- ![[Pasted image 20230828124441.png]]
- ![[Pasted image 20230828124839.png]]
- 1234 -> 80 = File Transfer Python3 -m http.server 80 on my AP
- 1234 -> 4444 = NC -LNVP 4444 on my AP to catch it
- I also uploaded mimikatz.exe because I had seen the same attack vector on OSCP-A with the windows.old pathway
- ![[Pasted image 20230828132048.png]]
- I was able to curl a file from my Proxy to the SQL Server with the internal IP on port 1235.
- This is the command used to pair the LSA Dump
- ![[Pasted image 20230828132553.png]]
- RID of 1001 indicates to me that he is the first user before other users were created, indicating Domain Admin Rights. I used the evil-winrm command to connect to this:
- Evil-winrm -i 10.10.x.146 -u tom_admin -H NTLM_Hash
- ![[Pasted image 20230828134039.png]]Port 5985 was open, allowing me to WinRm into the Machine
- ![[Pasted image 20230828132722.png]]